# Chapter 3. Functions

함수는 최대한 작게 만들어서 하나의 기능만 할 수 있게 만들자. 코드의 반복/중복을 피하자.

<br>

### 목차

> 1. 작게 만들어라!
> 2. 한 가지만 해라
> 3. 함수 하나 당 추상화 레벨은 하나
> 4. Switch 구문
> 5. 기술적인 이름을 사용해라
> 6. 함수 인자
> 7. 부작용을 일으키지 마라
> 8. 커맨드와 쿼리 분리
> 9. 오류 코드를 리턴하는 것보다 예외를 선호해라
> 10. 반복하지 마라
> 11. 구조적인 프로그래밍
> 12. 함수를 어떻게 짤 것인가?

<br>

### 1. 작게 만들어라!

- functions(함수) 의 가장 기본은 작아야 한다는 것(Small)
- 두번째, 훨씬 작아야한다는 것. 

→ Function은 작으면 작을수록 읽기 쉽고 이해하기 쉽다.

- 2~30줄로 장황하게 풀어쓰기보다는 3,4 줄로 간단하게 작성한 function을 여러개로 만드는게 좋다.

#### Blocks and Indenting

- 블록으로 코드를 구분짓는 것이 좋다.
- 들여쓰기 레벨은 코드의 중첩 구조를 2개 이상으로 해서 복잡하지 않게 한다.

<br>

### 2. 한 가지만 해라

- Function은 오직 하나의 기능, 동작을 수행해야 한다. 그래야 훨씬 코드는 효율적
- = one level of abstractions
- 책 속의 예시처럼, 3단계로 이루어진 function이지만 결과적으로는 하나의 추상화를 코드로 구현한 것이기 때문에 One Thing.

<br>

### 3. 함수 하나 당 추상화 레벨은 하나

- 하나의 함수 안에서는 추상화 레벨이 동일해야 한다.

#### Top to Bottom

- 코드를 위에서 아래로 흐름에 맞게 읽을 수 있게끔 짜는 것 → Stepdown Rule
- 이야기를 읽듯이 코드를 읽을 수 있어야 좋은 것.
- Function의 추상화 레벨이 한 단계씩 낮아지는 것이 좋음.

<br>

### 4. Switch 구문

> 일단 스위치 구문이 뭔지 모르겠다.

- switch문을 작게 만드는 것은 어렵지만, polymorphism(다형성)을 이용해서 낮은 레벨의 클래스에 숨겨놓고 반복되지 않도록 할 수 있다.

<br>

### 5. 기술적인 이름을 사용해라

- 함수가 더 작고 명확할 수록 기술적인 변수명을 고르는 것이 쉽다.
- 또한 이름을 길게 만드는 것을 두려워 하지 않아도 된다.
- 긴 기술적인 이름이 짧은 수수께끼 같은 이름보다 훨씬 낫다.
- Naming 에 시간을 쏟는 것을 두려워 하지 말아라.

> 개발자들은 대부분의 시간을 변수명을 짓는 것에 쏟는다지..

- 일관성있는 이름, 같은 문장, 명사, 동사 등을 사용하면  이야기를 말하는 것이 일관적일 것이다. (코드가 일관적)

<br>

### 6. 함수 인자

- 함수의 이상적인 인자 개수는 `0` 개
- 1~2개 까지는 써도 괜찮지만 3개 이상의 인자는 웬만하면 쓰지말 것!
- flag argument > bool 값을 넘기는 것. ugly 하니까 쓰지마라.

#### 동사 & 키워드

- Monadic 함수는 함수와 인자가 동사-명사 쌍을 이룬다.
- 키워드 인자로 선언하면 인자의 순서를 외울 필요가 없다!!

<br>

### 7. 부작용을 일으키지 마라

- ..

<br>

### 8. 커맨드와 쿼리 분리

- 함수는 무언가를 "수행" 하거나 무언가에 " 대답" 한다. 하지만 둘 모두를 해서는 안된다.
- 커맨더를 쿼리와 분리시키면 애매모호한 상황을 피할 수 있다.

<br>

### 9. 오류 코드를 리턴하는 것보다 예외를 선호하라

- Try/Catch 블록을 함수 코드에서 뽑아내서 작성하는 것이 좋다.
- 오류를 처리하는 함수도, 역시 함수이기 때문에 하나의 기능만 하게끔 작성해야 한다.

<br>

### 10. 반복하지 마라

- `DRY` - Don't Repeat Yourself
- 소프트웨어에서 반복/중복은 악의 근원이다.

<br>

### 11. 구조적인 프로그래밍

- 다익스트라의 구조적 프로그래밍 원칙

```
- 모든 함수와 블록은 하나의 입구와 하나의 출구를 가져야 한다.
- 함수에는 오직 하나의 return문이 있어야 한다.
- loop 앙네서 break와 continue는 쓰지 말아야 한다.
- goto 문은 절대로 사용하지 말 것.
```

- 함수가 클 때에는 위 원칙이 크게 작용하지만, 함수를 작게 만들 수 있다면 return, break, continue를 여러번 사용해도 괜찮다. 단일 입/출구 규칙을 적용하는 것보다 더 잘 함수를 표현할 수 있다.

<br>

### 12. 함수를 어떻게 짤 것인가?

- 소프트웨어 코드를 작성하는 것은 글을 쓰는 것과 같다.
- 모든 글의 초고는 투박하고 정리되어 있지 않다.
- 코드를 처음 작성하면 길고 복잡하면서 중첩 반복도 많다. 인자 리스트도 길고, 변수명은 제멋대로고 중복되는 코드도 많다.
- 하지만 함수를 나누고, 이름도 바꾸고 중복을 제거하면서 코드를 다듬어 갈 수 있다. 

